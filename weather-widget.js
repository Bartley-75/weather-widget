const drop = `<svg height="464pt" viewBox="-88 0 464 464" width="464pt" xmlns="http://www.w3.org/2000/svg">
	<path
		d="m288 314.855469c0 82.367187-64.472656 149.144531-144 149.144531s-144-66.777344-144-149.144531c0-82.367188 144-314.855469 144-314.855469s144 232.488281 144 314.855469zm0 0"
		fill="#60a2d7" />
	<g fill="#a3d4f7">
		<path
			d="m104 392c-2.996094-.003906-5.738281-1.679688-7.105469-4.339844-1.371093-2.664062-1.136719-5.871094.601563-8.308594l80-112c2.566406-3.597656 7.5625-4.429687 11.160156-1.863281 3.597656 2.566407 4.429688 7.5625 1.863281 11.160157l-80 112c-1.503906 2.105468-3.933593 3.355468-6.519531 3.351562zm0 0" />
		<path
			d="m104 328c-13.457031 0-24-14.054688-24-32s10.542969-32 24-32 24 14.054688 24 32-10.542969 32-24 32zm0-48c-3.265625 0-8 6.230469-8 16s4.734375 16 8 16 8-6.230469 8-16-4.734375-16-8-16zm0 0" />
		<path
			d="m184 392c-13.457031 0-24-14.054688-24-32s10.542969-32 24-32 24 14.054688 24 32-10.542969 32-24 32zm0-48c-3.265625 0-8 6.230469-8 16s4.734375 16 8 16 8-6.230469 8-16-4.734375-16-8-16zm0 0" />
	</g>
</svg>`;

const logo = `<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 658.57 658.57"><defs><style>.cls-1{fill:url(#linear-gradient);}.cls-2{fill:url(#linear-gradient-2);}.cls-3{fill:url(#linear-gradient-3);}.cls-4{fill:url(#linear-gradient-4);}.cls-5{fill:url(#linear-gradient-5);}.cls-6{fill:url(#linear-gradient-6);}.cls-7{fill:url(#linear-gradient-7);}.cls-8{fill:url(#linear-gradient-8);}.cls-9{fill:url(#linear-gradient-9);}.cls-10{fill:url(#linear-gradient-10);}.cls-11{fill:url(#linear-gradient-11);}.cls-12{fill:url(#linear-gradient-12);}.cls-13{fill:url(#linear-gradient-13);}.cls-14{fill:url(#linear-gradient-14);}.cls-15{fill:url(#linear-gradient-15);}.cls-16{fill:url(#linear-gradient-16);}</style><linearGradient id="linear-gradient" x1="297.55" y1="555.76" x2="5.78" y2="28.48" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#76b1ee"/><stop offset="0.44" stop-color="#3c40d5"/><stop offset="1" stop-color="#c04a5c"/></linearGradient><linearGradient id="linear-gradient-2" x1="296.08" y1="553.1" x2="8.24" y2="32.92" xlink:href="#linear-gradient"/><linearGradient id="linear-gradient-3" x1="85.43" y1="180.29" x2="265.88" y2="516.03" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#76b1ee"/><stop offset="1" stop-color="#3c40d5"/></linearGradient><linearGradient id="linear-gradient-4" x1="86.16" y1="181.65" x2="265.15" y2="514.67" xlink:href="#linear-gradient-3"/><linearGradient id="linear-gradient-5" x1="262.61" y1="507.24" x2="30.53" y2="31.35" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#76b1ee"/><stop offset="0.17" stop-color="#3c40d5"/><stop offset="1" stop-color="#c04a5c"/></linearGradient><linearGradient id="linear-gradient-6" x1="261.88" y1="505.74" x2="32.12" y2="34.61" xlink:href="#linear-gradient-5"/><linearGradient id="linear-gradient-7" x1="295.3" y1="664.08" x2="-1.85" y2="-195.71" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#76b1ee"/><stop offset="0.65" stop-color="#3c40d5"/><stop offset="1" stop-color="#c04a5c"/></linearGradient><linearGradient id="linear-gradient-8" x1="293.03" y1="657.6" x2="2.18" y2="-183.98" xlink:href="#linear-gradient-7"/><linearGradient id="linear-gradient-9" x1="114.3" y1="192.8" x2="-101.47" y2="590.92" gradientTransform="translate(484.17 -70.47) rotate(4.79)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#76b1ee"/><stop offset="0.65" stop-color="#3c40d5"/></linearGradient><linearGradient id="linear-gradient-10" x1="113.53" y1="194.22" x2="-100.74" y2="589.57" xlink:href="#linear-gradient-9"/><linearGradient id="linear-gradient-11" x1="-126.41" y1="602.19" x2="249.52" y2="20.8" gradientTransform="translate(484.17 -70.47) rotate(4.79)" xlink:href="#linear-gradient-5"/><linearGradient id="linear-gradient-12" x1="-125.32" y1="600.52" x2="247.39" y2="24.1" gradientTransform="translate(484.17 -70.47) rotate(4.79)" xlink:href="#linear-gradient-5"/><linearGradient id="linear-gradient-13" x1="-203.5" y1="739.95" x2="228.02" y2="29.58" gradientTransform="translate(484.17 -70.47) rotate(4.79)" xlink:href="#linear-gradient"/><linearGradient id="linear-gradient-14" x1="-201.16" y1="736.1" x2="225.38" y2="33.92" gradientTransform="translate(484.17 -70.47) rotate(4.79)" xlink:href="#linear-gradient"/><linearGradient id="linear-gradient-15" x1="97.06" y1="190.94" x2="-130.35" y2="682.63" gradientTransform="translate(484.17 -70.47) rotate(4.79)" xlink:href="#linear-gradient-7"/><linearGradient id="linear-gradient-16" x1="95.28" y1="194.79" x2="-128.05" y2="677.66" gradientTransform="translate(484.17 -70.47) rotate(4.79)" xlink:href="#linear-gradient-7"/></defs><path class="cls-1" d="M231.35,457.45C209,457.45,178.8,433,158,397.86c-13.07-22-25.18-52.13-31.6-78.54-7.54-31-6-50.69,4.4-56.87a15.06,15.06,0,0,1,7.8-2c10.69,0,26,8.79,44.22,25.4,20.09,18.31,40.7,43.37,53.76,65.4,12.48,21,20.24,43.25,21.84,62.51,1.63,19.66-3.34,34-14,40.28A25.35,25.35,0,0,1,231.35,457.45Zm-92.81-191a9.13,9.13,0,0,0-4.71,1.14c-7.5,4.45-8.14,23.75-1.67,50.37,6.3,25.88,18.15,55.36,30.94,76.92,19.82,33.43,47.76,56.77,67.94,56.78h0A20,20,0,0,0,241.4,449c8.94-5.3,12.91-17.95,11.19-35.63-1.75-18.07-9.25-39-21.11-59-12.78-21.56-33-46.1-52.66-64C162.2,275.1,147.51,266.41,138.54,266.41Z"/><path class="cls-2" d="M243.66,452.76c-20.95,12.42-58.8-12.55-84.37-55.66-13-21.92-25-51.85-31.43-78.14-7.27-29.88-6-49.49,3.71-55.22s27.5,2.52,50.24,23.23c20,18.21,40.49,43.14,53.48,65C260.86,395.14,264.62,440.33,243.66,452.76Zm-110.6-186.5c-8.21,4.87-9.09,24.31-2.36,52,6.33,26,18.25,55.65,31.11,77.33,24.74,41.73,60.79,66.24,80.36,54.64s15.35-55-9.4-96.72c-12.86-21.68-33.14-46.35-52.94-64.38C158.76,269.94,141.28,261.39,133.06,266.26Z"/><path class="cls-3" d="M241.35,516.19A77.6,77.6,0,0,1,217.44,512a127.88,127.88,0,0,1-24.55-11.51A168,168,0,0,1,171,484.69a238,238,0,0,1-36.87-39.42,312.2,312.2,0,0,1-28.16-46.07c-4.18-8.24-8-16.46-11.47-24.43-3.68-8.45-7.08-16.87-10.08-25-1.19-3.1-2.31-6.3-3.39-9.39-.39-1.1-.77-2.2-1.16-3.29s-.78-2.35-1.17-3.51c-1-3.06-2.07-6.22-3-9.37-2.93-9.38-5.29-17.91-7.22-26.06-2.18-8.95-4-17.91-5.33-26.62a207.32,207.32,0,0,1-2.58-27.26,114.24,114.24,0,0,1,2.4-27.83,57.75,57.75,0,0,1,4.95-13.77,37.21,37.21,0,0,1,4.22-6.41,29.19,29.19,0,0,1,5.81-5.5,30.52,30.52,0,0,1,14.81-5.42,38,38,0,0,1,4.23-.23c1.07,0,2.16,0,3.32.12a56.14,56.14,0,0,1,7.25,1c8.3,1.74,16.64,4.92,26.28,10a188.92,188.92,0,0,1,23.15,14.73c3.76,2.76,7.38,5.55,10.79,8.31,3,2.41,5.95,4.94,8.81,7.4l1.56,1.33c6.21,5.46,12.66,11.53,19.7,18.58,6.07,6.15,12.28,12.79,18.46,19.73C222.11,273,227.93,280,233.53,287c5.64,7.23,11,14.54,16,21.75a296.33,296.33,0,0,1,26.74,47A248.71,248.71,0,0,1,293,407a187,187,0,0,1,3.61,26.79c.12,1.46.15,3,.18,4.41,0,.77,0,1.55.06,2.32,0,1.53,0,3,0,4.5l0,2.28a135.51,135.51,0,0,1-1.2,13.56,97.22,97.22,0,0,1-2.78,13.28,80.93,80.93,0,0,1-4.93,12.77,61.29,61.29,0,0,1-7.48,11.51,53.16,53.16,0,0,1-10.16,9.26,50.62,50.62,0,0,1-12.39,6l-3.27.94c-.81.18-1.53.32-2.25.46l-1.15.23a18.1,18.1,0,0,1-2.51.37l-.92.11-.23,0a27.05,27.05,0,0,1-3.29.26C243.36,516.17,242.35,516.19,241.35,516.19ZM97.2,195a29,29,0,0,0-3.42.2,21.05,21.05,0,0,0-10.08,3.67,19.77,19.77,0,0,0-3.91,3.67,27,27,0,0,0-3.13,4.72,46.86,46.86,0,0,0-4.13,11.38,104.48,104.48,0,0,0-2.27,25.39c.08,4.17.3,8.56.66,13,.35,4.1.84,8.37,1.48,13,1.19,8.48,2.81,17.21,4.8,25.95.49,2.19,1,4.32,1.5,6.43L80.28,309l.49,1.87c.94,3.59,1.91,7.3,3,10.91.85,3.11,1.81,6.23,2.73,9.24l1.08,3.51,1.07,3.3c1,3.05,2,6.21,3.09,9.29,2.78,8.11,5.91,16.48,9.34,24.9,3.19,7.92,6.79,16.11,10.71,24.32a307.34,307.34,0,0,0,26.53,45.89A244.16,244.16,0,0,0,154.76,463a202.49,202.49,0,0,0,18.78,18.69,164.87,164.87,0,0,0,21.21,15.8,117.57,117.57,0,0,0,23.72,11.47,74.11,74.11,0,0,0,23.17,4.11q1.28,0,2.55-.06h.12a26.57,26.57,0,0,0,2.89-.21l.22,0,1-.1a17.43,17.43,0,0,0,2.17-.31l1.23-.24c.7-.13,1.39-.26,2.08-.41l3.12-.88a48,48,0,0,0,11.61-5.59,50.54,50.54,0,0,0,9.5-8.75,58.72,58.72,0,0,0,7-10.95,77.22,77.22,0,0,0,4.65-12.23,93.87,93.87,0,0,0,2.63-12.85,123,123,0,0,0,.65-26.39,181.68,181.68,0,0,0-3.92-26.19,237.35,237.35,0,0,0-17.6-49.93,292.57,292.57,0,0,0-27.33-45.38c-5.07-7-10.54-14-16.27-21s-11.57-13.56-17.5-20c-6.25-6.69-12.51-13.06-18.6-18.94s-12.71-11.79-19.67-17.77c-15.31-13-29.36-22.82-42.95-30-8.68-4.54-16.42-7.46-23.65-8.94A44.4,44.4,0,0,0,97.2,195Z"/><path class="cls-4" d="M269.43,506.46a49.28,49.28,0,0,1-12,5.84l-3.22.93c-1.09.24-2.19.44-3.28.66a30.82,30.82,0,0,1-3.32.46,28.73,28.73,0,0,1-3.34.27c-8.95.46-17.87-1.27-26.36-4a126,126,0,0,1-24.24-11.37,167.38,167.38,0,0,1-21.74-15.7,236.89,236.89,0,0,1-36.64-39.16,309.19,309.19,0,0,1-28-45.86q-6.09-12-11.44-24.34c-3.57-8.22-6.94-16.54-10-24.95-1.6-4.2-3-8.44-4.54-12.67s-2.87-8.51-4.16-12.81c-2.68-8.57-5.13-17.22-7.2-26s-3.92-17.58-5.31-26.5A208.61,208.61,0,0,1,62,244.21a114.08,114.08,0,0,1,2.36-27.47,55.91,55.91,0,0,1,4.82-13.4,35.13,35.13,0,0,1,4.06-6.17A27.58,27.58,0,0,1,78.75,192a29.24,29.24,0,0,1,14.09-5.16,39.64,39.64,0,0,1,7.3-.1,54.91,54.91,0,0,1,7.07,1,99.13,99.13,0,0,1,25.86,9.86,190.45,190.45,0,0,1,23,14.62q5.46,4,10.73,8.26c3.51,2.83,6.91,5.78,10.33,8.71,6.77,5.94,13.27,12.15,19.62,18.5s12.44,13,18.4,19.67,11.67,13.64,17.23,20.67,10.85,14.29,16,21.67a298.11,298.11,0,0,1,26.6,46.71,246.43,246.43,0,0,1,16.66,51,184.38,184.38,0,0,1,3.58,26.57c.19,2.23.16,4.47.25,6.7s0,4.47-.06,6.71c-.23,4.46-.51,8.93-1.18,13.35a96,96,0,0,1-2.75,13.11,78.47,78.47,0,0,1-4.83,12.49,60.36,60.36,0,0,1-7.27,11.22A52.32,52.32,0,0,1,269.43,506.46Zm0,0a52.33,52.33,0,0,0,9.82-9,59.59,59.59,0,0,0,7.2-11.23,78.43,78.43,0,0,0,4.76-12.48,97.52,97.52,0,0,0,2.68-13.1,125.93,125.93,0,0,0,.66-26.68,183.93,183.93,0,0,0-3.95-26.41,238.39,238.39,0,0,0-17.72-50.25,295.25,295.25,0,0,0-27.47-45.61q-7.84-10.77-16.32-21.07t-17.56-20q-9.09-9.74-18.66-19t-19.73-17.83c-13.48-11.45-27.78-22-43.22-30.19a92.73,92.73,0,0,0-24.06-9.09,40.78,40.78,0,0,0-12.26-.7,22.37,22.37,0,0,0-10.77,3.94,20.58,20.58,0,0,0-4.2,3.94,28.63,28.63,0,0,0-3.31,5,49.22,49.22,0,0,0-4.25,11.71,107.1,107.1,0,0,0-2.31,25.77c.08,4.36.31,8.75.67,13.13s.88,8.75,1.48,13.12c1.23,8.74,2.86,17.44,4.83,26.08.48,2.16,1,4.33,1.51,6.47l1.57,6.47c1.12,4.29,2.23,8.58,3.47,12.84s2.53,8.52,3.81,12.77,2.71,8.46,4.19,12.65c2.87,8.41,6,16.73,9.36,25S106.57,389,110.4,397a306.28,306.28,0,0,0,26.66,46.1A243.08,243.08,0,0,0,153.64,464a204.92,204.92,0,0,0,18.91,18.83A167.38,167.38,0,0,0,194,498.74a118.83,118.83,0,0,0,24,11.62c8.45,2.77,17.34,4.54,26.27,4.12a26.65,26.65,0,0,0,3.33-.25,30.59,30.59,0,0,0,3.31-.44c1.1-.21,2.2-.41,3.28-.64l3.22-.91A49.39,49.39,0,0,0,269.43,506.46Z"/><path class="cls-5" d="M244.28,492.91c-32.2,0-72.6-31.64-100.53-78.74-17.69-29.82-33.59-70.85-41.52-107.06-9.13-41.72-6-69.52,8.74-78.27a23,23,0,0,1,11.91-3c15.13,0,36.21,11.37,61,32.9,28,24.31,56.34,57.95,74,87.77C293,405.67,295.91,469,264.45,487.65A38.94,38.94,0,0,1,244.28,492.91ZM122.73,233.26a15.4,15.4,0,0,0-8,1.94c-11.29,6.69-13.32,33.64-5.29,70.33,7.77,35.5,23.35,75.68,40.66,104.87,26.27,44.3,64.84,75.24,93.79,75.24a32.44,32.44,0,0,0,16.78-4.34c28-16.58,23.84-75.36-9.18-131-17.31-29.19-45.09-62.13-72.51-86C156.31,244.57,135.8,233.26,122.73,233.26Z"/><path class="cls-6" d="M263.69,486.36c-30.75,18.24-84-14.49-118.65-73-17.61-29.69-33.45-70.54-41.34-106.61-9-41-6.13-68.26,8-76.66s39.43,2.15,71.13,29.72c27.86,24.22,56.1,57.71,73.71,87.41C291.25,405.73,294.44,468.13,263.69,486.36ZM114,233.91c-12,7.14-14.28,34-6,72,7.8,35.63,23.44,76,40.83,105.3,33.43,56.38,84,88.43,112.63,71.43s24.78-76.71-8.66-133.09c-17.38-29.32-45.29-62.4-72.81-86.34C150.69,237.7,126,226.77,114,233.91Z"/><path class="cls-7" d="M216.52,422.27c-13.93,0-32.69-15.85-46.68-39.43A214.74,214.74,0,0,1,149,332.92c-5.39-20.05-4.75-32.72,1.87-36.64a9.23,9.23,0,0,1,4.77-1.23c6.76,0,16.53,5.94,28.27,17.17a214.17,214.17,0,0,1,33.81,42.23c17.43,29.4,20.29,57.67,6.64,65.76A15,15,0,0,1,216.52,422.27ZM155.63,301a3.38,3.38,0,0,0-1.74.38c-2.32,1.37-4.75,9.24.84,30a208,208,0,0,0,20.21,48.43C187.49,401,205,416.32,216.59,416.32h0a9.19,9.19,0,0,0,4.75-1.21c4.65-2.76,6.49-10.44,5-21.07-1.54-11.23-6.43-24.22-13.75-36.57a208,208,0,0,0-32.8-41C165.18,302.51,158,301,155.63,301Z"/><path class="cls-8" d="M223.6,418.92c-12.7,7.54-35.75-8.65-52.47-36.85a212.52,212.52,0,0,1-20.68-49.54c-5.13-19-4.71-31.47,1.18-35s17,2.09,31.25,15.74a212.89,212.89,0,0,1,33.55,41.9C233.15,383.41,236.3,411.39,223.6,418.92ZM153.13,300.09c-3.49,2.07-5.29,11.48.15,31.68a209.38,209.38,0,0,0,20.37,48.81c15.36,25.89,37.54,42.3,48.45,35.82s7.16-33.8-8.19-59.69a209.33,209.33,0,0,0-33.06-41.29C165.73,301,156.62,298,153.13,300.09Z"/><path class="cls-9" d="M367.74,514.12A74.1,74.1,0,0,1,354,512.78l-1.4-.29c-.88-.17-1.78-.35-2.69-.62L346,510.72l-1-.37a51.24,51.24,0,0,1-6.75-2.88A54.35,54.35,0,0,1,324.75,498c-.14-.14-.31-.29-.48-.44-.35-.32-.71-.65-1-1l-1.37-1.49c-.27-.32-.54-.6-.81-.89a23.29,23.29,0,0,1-1.94-2.3l-2.4-3.16a.36.36,0,0,1-.07-.1l-2.16-3.38a24.79,24.79,0,0,1-1.43-2.5c-.19-.36-.37-.72-.57-1.07l-.17-.33a32.85,32.85,0,0,1-1.67-3.42s-1.59-3.69-1.61-3.72l-1.32-3.75A92.59,92.59,0,0,1,304,454.75a124,124,0,0,1-1.32-15.89,171.42,171.42,0,0,1,2.71-31.59c3.37-19.39,9.67-39,19.23-59.92a319.6,319.6,0,0,1,31.77-54.2h0a456.85,456.85,0,0,1,40.47-48,565.28,565.28,0,0,1,45.86-42.9c8-6.7,16.34-13.23,24.74-19.41,8.64-6.38,17.45-12.29,26.2-17.57a213.11,213.11,0,0,1,28.22-14.48c11.68-4.82,21.58-7.44,31.18-8.24,1.77-.11,3.29-.16,4.69-.16s2.51,0,3.68.13a45,45,0,0,1,8.42,1.44,32.52,32.52,0,0,1,15.06,9,39.25,39.25,0,0,1,5.19,7,54.55,54.55,0,0,1,3.57,7.75,76,76,0,0,1,3.66,16.18c1.12,9.64,1,19.89-.29,32.26a253.1,253.1,0,0,1-5.53,31.4c-9.28,38.21-24.22,76.71-45.67,117.71a465,465,0,0,1-33.27,53.9A306.59,306.59,0,0,1,470,466.38a237.57,237.57,0,0,1-25.13,19.7A197.59,197.59,0,0,1,417.09,502a158.07,158.07,0,0,1-14.9,6,126.34,126.34,0,0,1-15.66,4.21c-1.87.43-3.84.71-5.74,1l-2.22.32c-.94.11-1.83.18-2.72.26l-3.38.28-2.11,0C369.51,514.1,368.62,514.12,367.74,514.12Zm-16-9.05c.72.19,1.46.32,2.25.45l1.37.25a67.12,67.12,0,0,0,10.87.92h0c1.29,0,2.59,0,3.85-.13l1.94-.08,1.79-.2,1.36-.14c.8-.08,1.59-.17,2.38-.28l2.16-.36c1.79-.3,3.49-.58,5.18-1a119.41,119.41,0,0,0,14.57-4.29,148.33,148.33,0,0,0,13.91-6c16.84-8.32,33.15-19.84,49.88-35.24a306.82,306.82,0,0,0,40.49-46.19A457.22,457.22,0,0,0,535.94,360a585.07,585.07,0,0,0,26.18-56.2c8.91-22.28,15.15-40.91,19.63-58.66a266.84,266.84,0,0,0,6-30.13,136.54,136.54,0,0,0,1-30.22,66.69,66.69,0,0,0-2.88-14.39,45.17,45.17,0,0,0-2.8-6.53,31.23,31.23,0,0,0-4-5.61,25,25,0,0,0-11.39-7.12,37.58,37.58,0,0,0-7-1.35c-1.35-.13-2.81-.2-4.45-.2-1,0-1.89,0-2.84.06-8.73.5-18.31,2.8-29.26,7a210.81,210.81,0,0,0-27.78,13.42c-8.72,5-17.54,10.58-26.2,16.66-9.82,6.88-17.73,12.83-24.91,18.71-34.07,27.66-63.18,57.76-86.53,89.46a316.15,316.15,0,0,0-31.19,53.82A237.91,237.91,0,0,0,309.47,408a158.52,158.52,0,0,0-2,30.76,115.63,115.63,0,0,0,1.64,15.19A86.22,86.22,0,0,0,313,468.6c3.62,10.06,9.18,18.61,16.08,24.73a47.44,47.44,0,0,0,12.21,8.09,43.37,43.37,0,0,0,5.84,2.34l1,.34Z"/><path class="cls-10" d="M357.6,294a454.65,454.65,0,0,1,40.34-47.84,560.6,560.6,0,0,1,45.74-42.79q12-10,24.67-19.35c8.41-6.22,17.1-12.08,26.08-17.49a215.92,215.92,0,0,1,28-14.39c9.73-4,20-7.23,30.72-8.12a58.18,58.18,0,0,1,8.14,0,43.74,43.74,0,0,1,8.13,1.38,31.12,31.12,0,0,1,14.35,8.54,37.19,37.19,0,0,1,5,6.74,52.4,52.4,0,0,1,3.45,7.51A73.59,73.59,0,0,1,595.84,184a144.28,144.28,0,0,1-.29,31.92,254.54,254.54,0,0,1-5.5,31.22c-10,41-26.06,80.12-45.54,117.35a466.18,466.18,0,0,1-33.16,53.72,305.38,305.38,0,0,1-42.34,47,237.4,237.4,0,0,1-25,19.57,196.25,196.25,0,0,1-27.58,15.76c-4.8,2.27-9.76,4.19-14.77,6a124.17,124.17,0,0,1-15.44,4.14c-2.6.6-5.27.89-7.91,1.29-1.32.15-2.66.24-4,.36l-2,.16-2,0a70.81,70.81,0,0,1-16-1.26c-1.32-.3-2.65-.5-4-.88l-3.88-1.15a58,58,0,0,1-7.46-3.13,52.74,52.74,0,0,1-13.2-9.22c-.49-.46-1-.89-1.47-1.38L323,494.06a34.52,34.52,0,0,1-2.63-3l-2.44-3.2-2.15-3.38c-.76-1.1-1.31-2.32-2-3.49a38.31,38.31,0,0,1-1.76-3.58l-1.58-3.66L309.12,470a90.44,90.44,0,0,1-3.64-15.42,118.47,118.47,0,0,1-1.31-15.72,171.61,171.61,0,0,1,2.68-31.3C310.45,386.88,317.3,367,326,348A317.19,317.19,0,0,1,357.6,294Zm0,0a317.11,317.11,0,0,0-31.34,54.08A238.69,238.69,0,0,0,308,407.71a160,160,0,0,0-2,31.05,118.77,118.77,0,0,0,1.66,15.42,87.31,87.31,0,0,0,3.91,14.92c3.47,9.64,8.92,18.62,16.5,25.35a49.18,49.18,0,0,0,12.57,8.33,53.67,53.67,0,0,0,7,2.76l3.65,1c1.22.33,2.48.48,3.71.73a66.58,66.58,0,0,0,15.13.81l1.9-.08,1.89-.2c1.27-.15,2.53-.26,3.79-.43,2.51-.45,5-.78,7.51-1.41a120.34,120.34,0,0,0,14.68-4.33A151.39,151.39,0,0,0,414,495.49c18.42-9.1,35.09-21.54,50.22-35.47a307.36,307.36,0,0,0,40.7-46.42,463,463,0,0,0,32.32-52.93,580.76,580.76,0,0,0,26.25-56.34c7.7-19.23,14.64-38.82,19.7-58.85a274.16,274.16,0,0,0,6-30.3,137.94,137.94,0,0,0,1-30.56,68.26,68.26,0,0,0-2.94-14.71,45.26,45.26,0,0,0-2.91-6.77,32.05,32.05,0,0,0-4.16-5.91,26.45,26.45,0,0,0-12.06-7.55,39.63,39.63,0,0,0-7.24-1.41,53.66,53.66,0,0,0-7.51-.15c-10.1.58-20.13,3.42-29.74,7.13a213.64,213.64,0,0,0-28,13.51c-9,5.15-17.8,10.76-26.32,16.75s-16.93,12.16-25,18.77C412.05,230.55,382.37,260.4,357.6,294Z"/><path class="cls-11" d="M375.15,485.39c-10.72,0-20-2.78-27.74-8.25-34.72-24.73-25.06-98.05,21.52-163.45,23.51-33,59.81-69.39,94.75-95,29-21.24,53.51-32.46,70.89-32.46,6.59,0,12.19,1.61,16.63,4.77,16.25,11.57,17.11,44.16,2.43,91.76-12.76,41.39-35.28,87.59-58.78,120.58C459.91,452.43,411.81,485.39,375.15,485.39Zm159.6-290.91c-15.6,0-39.14,10.94-66.27,30.8-34.28,25.11-69.89,60.79-92.92,93.13-21.37,30-35.52,62.45-39.85,91.38-4.28,28.57,1.55,50.13,16.42,60.72,6.45,4.59,14.34,6.92,23.46,6.92,33.8,0,79.07-31.65,112.63-78.78,23-32.33,45.12-77.65,57.64-118.26,13.17-42.7,13.4-73.63.62-82.73C543.51,195.55,539.57,194.48,534.75,194.48Z"/><path class="cls-12" d="M370.15,314.56c23.42-32.88,59.6-69.14,94.41-94.63,39.63-29,70.09-38.85,85.77-27.68s16.34,43.17,1.87,90.1C539.49,323.59,517,369.63,493.63,402.5c-46.11,64.73-111.31,97.66-145.35,73.42S324.05,379.28,370.15,314.56Zm97.45-90.49c-34.41,25.19-70.14,61-93.26,93.47C329.88,380,319.52,449.13,351.26,471.73s93.72-9.79,138.18-72.21c23.12-32.45,45.29-77.93,57.85-118.68,13.37-43.36,13.39-74.91.06-84.41S504.2,197.27,467.6,224.07Z"/><path class="cls-13" d="M391.88,445.26a30.26,30.26,0,0,1-18-5.33c-23.87-17-15.24-70.22,19.24-118.62,17.36-24.37,43.78-51.53,69-70.88,21.54-16.56,39.44-25.3,51.76-25.3a18.22,18.22,0,0,1,10.82,3.11c11.27,8,11.09,31.61-.52,66.39-10.06,30.13-27.09,64-44.45,88.35C453.2,420.23,417.89,445.26,391.88,445.26ZM514,231.58c-10.83,0-27.85,8.5-47.94,23.94-24.71,19-50.64,45.63-67.65,69.51C366,370.56,356.65,419.75,377.64,434.7a24.58,24.58,0,0,0,14.6,4.28c23.75,0,56.81-24,82.26-59.73,17-23.88,33.71-57.09,43.58-86.65,10.18-30.49,11.29-53.15,2.89-59.13A11.88,11.88,0,0,0,514,231.58Z"/><path class="cls-14" d="M394.37,322.18c17.28-24.26,43.59-51.3,68.66-70.56,28.51-21.91,50.1-29.78,60.8-22.16s10.31,30.59-1.08,64.7c-10,30-27,63.69-44.24,87.95-34,47.73-80.53,73.12-103.73,56.6S360.37,369.91,394.37,322.18Zm70.75-67.85c-24.83,19.08-50.87,45.83-68,69.83-32.91,46.2-42.05,96.33-20.39,111.76s66.05-9.6,99-55.8c17.1-24,33.87-57.35,43.79-87.05,10.55-31.61,11.42-54.35,2.33-60.82S491.54,234,465.12,254.33Z"/><path class="cls-15" d="M411.27,405.67a18,18,0,0,1-10.68-3.19c-7.31-5.21-9.77-16-6.92-30.33,2.76-13.94,10.27-30,21.14-45.29,11.12-15.6,27.77-33.16,43.46-45.84,14-11.27,25.44-17.23,33.21-17.23a11,11,0,0,1,6.54,1.9c7.22,5.14,6.7,19.87-1.5,42.58-6.86,19-18,40.45-29.12,56.05C449.51,389.44,427.48,405.67,411.27,405.67Zm80.22-135.44c-2.9,0-11.54,1.54-29.18,15.79-15.28,12.34-31.47,29.42-42.26,44.57-9.76,13.7-16.74,28.39-19.64,41.35-2.76,12.35-1.34,21.57,3.9,25.31a11.63,11.63,0,0,0,6.86,2c13.61,0,35.06-16.24,51-38.62,10.79-15.15,21.64-36,28.31-54.5,8.59-23.79,6.44-33.3,3.81-35.17A4.88,4.88,0,0,0,491.49,270.23Z"/><path class="cls-16" d="M416,327.74c11-15.5,27.58-32.95,43.17-45.55,18-14.5,31.42-19.92,37.94-15.28s5.79,19.15-2,40.85c-6.81,18.86-17.9,40.2-28.93,55.69-22.24,31.21-50.66,47.82-64.72,37.81S393.8,359,416,327.74Zm45.32-42.89c-15.37,12.42-31.67,29.61-42.54,44.87-20.41,28.66-27.45,60.14-15.38,68.75s39.53-8.35,59.95-37c10.86-15.25,21.78-36.28,28.5-54.87,8.3-23,7.14-34.14,3.27-36.89S480.39,269.48,461.36,284.85Z"/></svg>`;

export class WeatherWidget {
	constructor({ lng = -104.99, lat = 39.74, apiKey, containerId, locationName = "", unit = "imperial" }) {
		this.lng = lng;
		this.lat = lat;
		this.apiKey = apiKey;
		this.containerId = containerId;
		this.locationName = locationName;
		this.apiUrl = `https://connect.nexusweatherandclimate.com/core/nexus_sync_forecast/json?lngLat=${lng},${lat}&unit=${unit}&timezone=${this.getTimezone()}`;
	}

	async fetchWeather() {
		try {
			const response = await fetch(this.apiUrl, {
				headers: { "x-api-key": this.apiKey }
			});

			if (!response.ok) throw new Error("Data loading error");

			const data = await response.json();
			const parsedLocationData = JSON.parse(data.location_units);
			this.render({ daily_summary: data.daily_summary, location_units: parsedLocationData });

		} catch (error) {
			console.error("Data retrieval error:", error);
		}
	}

	getConfidenceLevel(level) {
		const levels = {
			Low: { text: "LOW ", color: "#c27e7e" },
			Moderate: { text: "MID ", color: "#e1aa3e" },
			High: { text: "HIGH ", color: "#77b72f" }
		};

		return levels[level] || { text: "UNKNOWN", color: "#000" };
	}

	getTimezone() {
		return Intl.DateTimeFormat().resolvedOptions().timeZone;
	}

	render(data) {
		const container = document.getElementById(this.containerId);
		if (!container) return console.error("Container not found");

		const shadowRoot = container.shadowRoot || container.attachShadow({ mode: "open" });
		shadowRoot.innerHTML = "";

		// Create the main widget container
		const widgetContainer = this.createElement("div", "weather-container");
		const weatherContainer = this.createElement("div", "weather-data-container");

		// Loop through weather data and create elements
		Object.entries(data.daily_summary).forEach(([timestamp, values]) => {
			const dayElement = this.createWeatherDay(timestamp, values, data.location_units);
			weatherContainer.appendChild(dayElement);
		});

		// Create footer
		const footer = this.createFooter();

		// Create header
		const header = this.createHeader(data.location_units.LocationName);

		// Append elements to shadowRoot
		widgetContainer.appendChild(header);
		widgetContainer.appendChild(weatherContainer);
		widgetContainer.appendChild(footer);
		shadowRoot.appendChild(this.createStyles());
		shadowRoot.appendChild(widgetContainer);
	}

	/** Utility function to create an element with a class */
	createElement(tag, className, innerHTML = "") {
		const element = document.createElement(tag);
		if (className) element.classList.add(className);
		if (innerHTML) element.innerHTML = innerHTML;
		return element;
	}

	/** Create weather day element */
	createWeatherDay(timestamp, values, location_units) {
		const dayElement = this.createElement("div", "weather-day");

		const date = new Date(Number(timestamp));
		const formattedDate = date.toLocaleDateString(undefined, { weekday: "short", day: "numeric" }).replace(",", "");
		const [dayName, dayNumber] = formattedDate.split(" ");

		const { text, color } = this.getConfidenceLevel(values.NexusConfidence);

		dayElement.innerHTML = `
			<p class="weather-date">
				<span class="weather-day-name">${dayName}</span> 
				<span class="weather-day-number">${dayNumber}</span>
			</p>
			<img class="weather-icon" alt="weather-icon" src="${values.DailyIcon}" />
			<p class="weather-temp">${values.air_temperature_min}<sup>&deg;</sup>${location_units.air_temperature_units === "fahrenheit" ? "F" : "С"} / ${values.air_temperature_max}<sup>&deg;</sup>${location_units.air_temperature_units === "fahrenheit" ? "F" : "С"}</p>
			<p class="weather-wind">${values.wind_speed_min}-${values.wind_speed_max} ${location_units.wind_speed_units}</p>					
			
			<div class="footer">
				<div class="wind-speed-icon-wrapper">
					<img alt="wind-icon" src="${this.createBlob(drop)}" class="wind-speed-icon" />
				</div>
				<p class="weather-wind">${values.probability_of_precip} / ${values.precipitation_rate_mean_accumulation} ${location_units.precipitation_accumulation_units}</p>					
			</div>
			<p class="confidence-level" style="color: ${color}"><span>${text}</span> </br> <span>Confidence</span></p>
		`;

		return dayElement;
	}

	/** Create footer */
	createFooter() {
		const footer = this.createElement("div", "footer", `
			<p class="powered-by">Powered by Nexus Weather and Climate</p>
			<div class="nexus-logo-wrapper">
				<img class="nexus-logo" alt="nexus-logo" src="${this.createBlob(logo)}" />
			</div>
		`);
		return footer;
	}

	createHeader(location) {
		const header = this.createElement("div", "", `
			<p class="header">${!!this.locationName ? this.locationName : location}</p>
		`);
		return header;
	}

	/** Create a blob URL from SVG string */
	createBlob(svgString) {
		const blob = new Blob([svgString], { type: "image/svg+xml" });
		return URL.createObjectURL(blob);
	}

	/** Create styles for the widget */
	createStyles() {
		const styles = document.createElement("style");
		styles.textContent = `
			p {
				margin: 0;
				font-family: "Roboto", "Helvetica", "Arial", sans-serif;
			}
			.header {
				font-weight: 500;
				font-size: 14px;
				color: rgba(0, 0, 0, 0.9);
				text-align: left;
			}	
			.weather-container {
				display: flex;
				flex-direction: column;
				padding: 16px 16px 0;
				background: white;
				overflow-x: auto;
				text-align: center;
			}	
			.weather-data-container {
				display: flex;
				justify-content: space-between;
				background: white;
				border-radius: 10px;
				overflow-x: auto;
			}
			.weather-day {
				text-align: center;
				margin: 0 5px;
				min-width: 120px;
			}
			.weather-icon {
				width: 40px;
				height: 40px;
			}
			.weather-date {
				font-size: 12px;
				text-transform: uppercase;
				font-weßight: 500;
			}
			.weather-temp {
				font-weight: 500;
				font-size: 12px;
				color: rgba(0, 0, 0, 0.9);
			}
			.weather-wind {
				font-weight: 500;
				font-size: 12px;
				color: rgba(0, 0, 0, 0.5);
			}
			.powered-by {
				margin: 0;
				font-size: 11px;
				color: rgba(0, 0, 0, 0.5);
				font-weight: 500;
			}
			.weather-day-name {
				color: rgba(0, 0, 0, 0.5);
			}	
			.weather-day-number {
				color: rgba(0, 0, 0, 0.9);
			}
			.nexus-logo {
				width: 100%;
				height: 100%;
			}
			.nexus-logo-wrapper {
				width: 100%;
				max-width: 18px;
				height: 100%;
				max-height: 18px;
			}
			.footer {
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 4px;
			}
			.wind-speed-icon {
				width: 100%;
				height: 100%;
			}	
			.wind-speed-icon-wrapper {
				width: 100%;
				max-width: 22px;
				height: 100%;
				max-height: 22px;
			}
			.confidence-level {
				font-weight: 500;
				font-size: 12px;
				text-align: center;
			}
		`;
		
		return styles;
	}
}